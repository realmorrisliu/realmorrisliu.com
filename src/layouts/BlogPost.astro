---
import Layout from "./Layout.astro";
import "../styles/global.css";

interface Props {
  title: string;
  description: string;
  pubDate: Date;
  updatedDate?: Date;
  author: string;
  tags?: string[];
}

const { title, description, pubDate, updatedDate, author, tags } = Astro.props;

const formatDate = (date: Date) => {
  return date.toLocaleDateString("en-US", {
    year: "numeric",
    month: "long",
    day: "numeric",
  });
};
---

<Layout 
  title={`${title} - Morris Liu`}
  description={description}
  type="article"
  publishedTime={pubDate.toISOString()}
  modifiedTime={updatedDate?.toISOString()}
  tags={tags}
>
  <article class="mx-auto max-w-2xl px-6 py-16">
    <header class="mb-16">
      <h1 class="mb-6 font-serif text-4xl leading-tight">{title}</h1>

      <div class="mb-4">
        <time class="text-base" style="color: var(--color-text-tertiary);">
          {formatDate(pubDate)}
        </time>
        {
          updatedDate && (
            <span class="ml-6 text-base" style="color: var(--color-text-tertiary);">
              Updated: {formatDate(updatedDate)}
            </span>
          )
        }
      </div>

      <p class="mb-6 text-lg leading-relaxed" style="color: var(--color-text-secondary);">
        {description}
      </p>

      {
        tags && tags.length > 0 && (
          <div class="flex flex-wrap gap-3">
            {tags.map(tag => (
              <span
                class="rounded-full border px-3 py-1 text-sm"
                style="color: var(--color-text-secondary); border-color: var(--color-border);"
              >
                {tag}
              </span>
            ))}
          </div>
        )
      }
    </header>

    <div class="prose prose-lg prose-gray max-w-none">
      <slot />
    </div>

    <!-- 作者签名式导航 -->
    <footer class="mt-24 space-y-6 pt-8">
      <div class="space-y-4">
        <p class="text-base leading-relaxed" style="color: var(--color-text-secondary);">
          Thank you for reading.
        </p>

        <p class="text-base leading-relaxed" style="color: var(--color-text-secondary);">
          You can find more of my <a href="/thoughts" style="color: var(--color-text-link);"
            >thoughts</a
          >
          or return to my <a href="/" style="color: var(--color-text-link);">main page</a>.
        </p>
      </div>

      <div class="pt-4">
        <p class="font-serif text-base" style="color: var(--color-text-primary);">
          {author}
        </p>
        <time class="text-sm" style="color: var(--color-text-tertiary);">
          {formatDate(pubDate)}
        </time>
      </div>
    </footer>
  </article>
</Layout>
